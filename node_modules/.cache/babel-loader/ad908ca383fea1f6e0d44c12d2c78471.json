{"remainingRequest":"E:\\projects\\tandashop\\tdshop-view\\node_modules\\babel-loader\\lib\\index.js!E:\\projects\\tandashop\\tdshop-view\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\projects\\tandashop\\tdshop-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\projects\\tandashop\\tdshop-view\\src\\views\\login\\login.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\projects\\tandashop\\tdshop-view\\src\\views\\login\\login.vue","mtime":1589621359188},{"path":"E:\\projects\\tandashop\\tdshop-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1589621359188},{"path":"E:\\projects\\tandashop\\tdshop-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1589621359188},{"path":"E:\\projects\\tandashop\\tdshop-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1589621359188},{"path":"E:\\projects\\tandashop\\tdshop-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1589621359188}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IGh0dHBBcGkgZnJvbSAnLi4vLi4vYXBpL2h0dHAuanMnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkxvZ2luIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY29kZVVybDogJy4uLy4uL2Fzc2V0cy9sb2dvLnBuZycsCiAgICAgIGNvZGVUZXh0OiAnJwogICAgfTsKICB9LAogIGJlZm9yZUNyZWF0ZTogZnVuY3Rpb24gYmVmb3JlQ3JlYXRlKCkgewogICAgdGhpcy5mb3JtID0gdGhpcy4kZm9ybS5jcmVhdGVGb3JtKHRoaXMsIHsKICAgICAgbmFtZTogJ25vcm1hbF9sb2dpbicKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlU3VibWl0OiBmdW5jdGlvbiBoYW5kbGVTdWJtaXQoZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB0aGlzLmZvcm0udmFsaWRhdGVGaWVsZHMoZnVuY3Rpb24gKGVyciwgdmFsdWVzKSB7CiAgICAgICAgaWYgKCFlcnIpIHsKICAgICAgICAgIGlmIChfdGhpcy5jb2RlVGV4dC50b0xvd2VyQ2FzZSgpICE9PSB2YWx1ZXMuY29kZUlucHV0VmFsdWUudG9Mb3dlckNhc2UoKSkgewogICAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcign6aqM6K+B56CB6ZSZ6K+vIScpOwoKICAgICAgICAgICAgX3RoaXMuZ2V0Y29kZSgpOwoKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIHZhbHVlcy5jb2RlVGV4dCA9IF90aGlzLmNvZGVUZXh0OwogICAgICAgICAgY29uc29sZS5sb2coJ1JlY2VpdmVkIHZhbHVlcyBvZiBmb3JtOiAnLCB2YWx1ZXMpOwogICAgICAgICAgYXhpb3MucG9zdChodHRwQXBpLmxvZ2luVXJsLCB2YWx1ZXMpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpOwogICAgICAgICAgICB2YXIgZGF0YXMgPSByZXN1bHQuZGF0YTsKCiAgICAgICAgICAgIGlmIChkYXRhcy5zdGF0dXMgPT09IDEwMDApIHsKICAgICAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcihkYXRhcy5tc2cpOwoKICAgICAgICAgICAgICBfdGhpcy5nZXRjb2RlKCk7CgogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICBuYW1lOiAnaG9tZScKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCLnmbvpmYblvILluLggOiAiICsgZXJyKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZ2V0Y29kZTogZnVuY3Rpb24gZ2V0Y29kZSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBheGlvcy5nZXQoaHR0cEFwaS5nZXRDb2RlVXJsKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICBfdGhpczIuY29kZVVybCA9IHJlc3VsdC5kYXRhLmNvZGU7CiAgICAgICAgX3RoaXMyLmNvZGVUZXh0ID0gcmVzdWx0LmRhdGEuY29kZVRleHQ7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9KTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldGNvZGUoKTsKICAgIHRoaXMuZm9ybS5zZXRGaWVsZHNWYWx1ZSh7CiAgICAgIGxvZ2luTmFtZTogImFkbWluIiwKICAgICAgbG9naW5QYXNzd29yZDogImFkbWluIgogICAgfSk7CiAgfQp9Ow=="},{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA,OAAA,KAAA,MAAA,OAAA;AACA,OAAA,OAAA,MAAA,mBAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,uBADA;AAEA,MAAA,QAAA,EAAA;AAFA,KAAA;AAKA,GARA;AASA,EAAA,YATA,0BASA;AACA,SAAA,IAAA,GAAA,KAAA,KAAA,CAAA,UAAA,CAAA,IAAA,EAAA;AAAA,MAAA,IAAA,EAAA;AAAA,KAAA,CAAA;AAEA,GAZA;AAaA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,wBACA,CADA,EACA;AAAA;;AACA,MAAA,CAAA,CAAA,cAAA;AACA,WAAA,IAAA,CAAA,cAAA,CAAA,UAAA,GAAA,EAAA,MAAA,EAAA;AACA,YAAA,CAAA,GAAA,EAAA;AACA,cAAA,KAAA,CAAA,QAAA,CAAA,WAAA,OAAA,MAAA,CAAA,cAAA,CAAA,WAAA,EAAA,EAAA;AACA,YAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,QAAA;;AACA,YAAA,KAAA,CAAA,OAAA;;AACA;AACA;;AACA,UAAA,MAAA,CAAA,QAAA,GAAA,KAAA,CAAA,QAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,2BAAA,EAAA,MAAA;AACA,UAAA,KAAA,CAAA,IAAA,CAAA,OAAA,CAAA,QAAA,EAAA,MAAA,EAAA,IAAA,CAAA,UAAA,MAAA,EAAA;AACA,YAAA,OAAA,CAAA,GAAA,CAAA,MAAA;AACA,gBAAA,KAAA,GAAA,MAAA,CAAA,IAAA;;AACA,gBAAA,KAAA,CAAA,MAAA,KAAA,IAAA,EAAA;AACA,cAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,KAAA,CAAA,GAAA;;AACA,cAAA,KAAA,CAAA,OAAA;;AACA;AACA;;AACA,YAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AAAA,cAAA,IAAA,EAAA;AAAA,aAAA;AACA,WATA,EASA,KATA,CASA,UAAA,GAAA,EAAA;AACA,YAAA,OAAA,CAAA,GAAA,CAAA,YAAA,GAAA;AACA,WAXA;AAYA;AACA,OAtBA;AAuBA,KA1BA;AA2BA,IAAA,OA3BA,qBA2BA;AAAA;;AACA,MAAA,KAAA,CAAA,GAAA,CAAA,OAAA,CAAA,UAAA,EAAA,IAAA,CAAA,UAAA,MAAA,EAAA;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,MAAA,CAAA,IAAA,CAAA,IAAA;AACA,QAAA,MAAA,CAAA,QAAA,GAAA,MAAA,CAAA,IAAA,CAAA,QAAA;AACA,OAHA,EAGA,KAHA,CAGA,UAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,OALA;AAMA;AAlCA,GAbA;AAiDA,EAAA,OAjDA,qBAiDA;AACA,SAAA,OAAA;AACA,SAAA,IAAA,CAAA,cAAA,CAAA;AAAA,MAAA,SAAA,EAAA,OAAA;AAAA,MAAA,aAAA,EAAA;AAAA,KAAA;AACA;AApDA,CAAA","sourcesContent":["<template>\r\n  <a-layout class>\r\n    <a-layout-content>\r\n      <div class=\"form-header\">\r\n        <img src=\"../../assets/logo.png\" />\r\n        <label>后台管理</label>\r\n      </div>\r\n      <a-form  :form=\"form\"  id=\"form-login\" class=\"login-form center\" @submit=\"handleSubmit\"> \r\n        <a-form-item>\r\n          <a-input \r\n            placeholder=\"登录名\" \r\n            v-decorator=\"[\r\n            'loginName',\r\n            { rules: [{ required: true, message: 'Please input your username!' }] },\r\n            ]\"\r\n          >\r\n            <a-icon slot=\"prefix\" type=\"user\" style=\"color: rgba(0,0,0,.25)\" />\r\n          </a-input>\r\n        </a-form-item>\r\n        <a-form-item>\r\n          <a-input type=\"password\"  placeholder=\"密码\" name=\"loginPassword\" v-decorator=\"[\r\n          'loginPassword',\r\n          { rules: [{ required: true, message: 'Please input your Password!' }] },\r\n        ]\">\r\n            <a-icon slot=\"prefix\" type=\"lock\" style=\"color: rgba(0,0,0,.25)\" />\r\n          </a-input>\r\n        </a-form-item>\r\n        <a-form-item>\r\n            <a-input class=\"codeinput\" placeholder=\"请输入验证码\" name=\"codeInputValue\" v-decorator=\"[\r\n          'codeInputValue',\r\n          { rules: [{ required: true, message: '验证码不能为空!'}] },\r\n        ]\">\r\n            </a-input>\r\n            <img :src=\"codeUrl\" class=\"code\">\r\n        </a-form-item>\r\n        <a-form-item>\r\n          <a class=\"login-form-forgot\" href>Forgot password</a>\r\n          <a-button type=\"primary\" html-type=\"submit\" class=\"login-form-button\">登陆</a-button>\r\n        </a-form-item>\r\n      </a-form>\r\n    </a-layout-content>\r\n    <a-layout-footer>公众号课程管理</a-layout-footer>\r\n  </a-layout>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport httpApi from '../../api/http.js';\r\nexport default {\r\n  name: \"Login\",\r\n  data() {\r\n    return {\r\n        codeUrl:'../../assets/logo.png',\r\n        codeText:'',\r\n        \r\n    };\r\n  },\r\n  beforeCreate() {\r\n    this.form = this.$form.createForm(this, { name: 'normal_login' });\r\n    \r\n  },\r\n  methods: {\r\n    handleSubmit(e) {\r\n      e.preventDefault();\r\n      this.form.validateFields((err, values) => {\r\n        if (!err) {\r\n            if(this.codeText.toLowerCase()!==values.codeInputValue.toLowerCase()){\r\n                this.$message.error('验证码错误!');\r\n                this.getcode();\r\n                return;\r\n            }\r\n            values.codeText = this.codeText;\r\n            console.log('Received values of form: ', values);\r\n            axios.post(httpApi.loginUrl,values).then((result) => {\r\n                console.log(result)\r\n                let datas = result.data;\r\n                if(datas.status===1000){\r\n                    this.$message.error(datas.msg);\r\n                    this.getcode();\r\n                    return;\r\n                }\r\n                this.$router.push({name:'home'})\r\n            }).catch((err) => {\r\n                console.log(\"登陆异常 : \"+err)\r\n            });\r\n        }\r\n      });\r\n    },\r\n    getcode(){\r\n        axios.get(httpApi.getCodeUrl).then((result) => {\r\n            this.codeUrl = result.data.code;\r\n            this.codeText = result.data.codeText;\r\n        }).catch((err) => {\r\n            console.log(err)\r\n        });\r\n    }\r\n  },\r\n  mounted(){\r\n      this.getcode();\r\n      this.form.setFieldsValue({loginName:\"admin\",loginPassword:\"admin\"})\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.center {\r\n  text-align: center;\r\n}\r\n.ant-layout {\r\n  font-family: Arial, \"PingFang SC\", \"Microsoft YaHei\";\r\n}\r\n.ant-layout-content {\r\n  width: 100%;\r\n  height: 100%;\r\n  background: url(\"../../assets/images/login-bg.jpg\") no-repeat fixed;\r\n  background-size: cover;\r\n  padding: 13% 34% 12% 34%;\r\n}\r\n.form-header label {\r\n  font-size: 20px;\r\n  font-weight: 600;\r\n}\r\n.form-header img {\r\n  width: 30px;\r\n  height: 30px;\r\n}\r\n.login-form {\r\n  max-width: 400px;\r\n  width: 400px;\r\n  background: #ffffff;\r\n  border: #e8e8ee solid 1px;\r\n  border-radius: 4px;\r\n  padding: 30px;\r\n}\r\n.login-form-forgot {\r\n  float: right;\r\n}\r\n.login-form-button {\r\n  width: 100%;\r\n}\r\n.login-form .codeinput{\r\n    width:150px;\r\n    float: left;\r\n}\r\n.login-form .code{\r\n    width: 150px;\r\n    height: 50px;\r\n}\r\n</style>"],"sourceRoot":"src/views/login"}]}