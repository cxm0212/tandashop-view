{"remainingRequest":"E:\\资料整理cxm\\sihuo项目\\weichat\\tandashop\\tdshop-view\\node_modules\\babel-loader\\lib\\index.js!E:\\资料整理cxm\\sihuo项目\\weichat\\tandashop\\tdshop-view\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\资料整理cxm\\sihuo项目\\weichat\\tandashop\\tdshop-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\资料整理cxm\\sihuo项目\\weichat\\tandashop\\tdshop-view\\src\\views\\course\\courseLoopImages.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\资料整理cxm\\sihuo项目\\weichat\\tandashop\\tdshop-view\\src\\views\\course\\courseLoopImages.vue","mtime":1589965083893},{"path":"E:\\资料整理cxm\\sihuo项目\\weichat\\tandashop\\tdshop-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1589772030553},{"path":"E:\\资料整理cxm\\sihuo项目\\weichat\\tandashop\\tdshop-view\\node_modules\\babel-loader\\lib\\index.js","mtime":1589772028696},{"path":"E:\\资料整理cxm\\sihuo项目\\weichat\\tandashop\\tdshop-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1589772030553},{"path":"E:\\资料整理cxm\\sihuo项目\\weichat\\tandashop\\tdshop-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1589772043896}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkU6L1x1OEQ0NFx1NjU5OVx1NjU3NFx1NzQwNmN4bS9zaWh1b1x1OTg3OVx1NzZFRS93ZWljaGF0L3RhbmRhc2hvcC90ZHNob3Atdmlldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7CmltcG9ydCBodHRwQXBpIGZyb20gJy4uLy4uL2FwaS9odHRwJzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKdmFyIGZpbGVVaWRSZWFsSWQgPSB7fTsKCmZ1bmN0aW9uIGdldEJhc2U2NChpbWcpIHsKICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsgLy8gcmVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLCAoKSA9PiBjYWxsYmFjayhyZWFkZXIucmVzdWx0KSk7CgogIHJlYWRlci5yZWFkQXNEYXRhVVJMKGltZyk7CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiByZXNvbHZlKHJlYWRlci5yZXN1bHQpOwogICAgfTsKCiAgICByZWFkZXIub25lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikgewogICAgICByZXR1cm4gcmVqZWN0KGVycm9yKTsKICAgIH07CiAgfSk7Cn0KCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogWydjb3Vyc2VJZCcsICd0eXBlJ10sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHByZXZpZXdWaXNpYmxlOiBmYWxzZSwKICAgICAgcHJldmlld0ltYWdlOiAnJywKICAgICAgZmlsZUxpc3Q6IFtdLAogICAgICBmaWxlVWlkUmVhbElkOiBmaWxlVWlkUmVhbElkCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlQ2FuY2VsOiBmdW5jdGlvbiBoYW5kbGVDYW5jZWwoKSB7CiAgICAgIHRoaXMucHJldmlld1Zpc2libGUgPSBmYWxzZTsKICAgIH0sCiAgICBoYW5kbGVQcmV2aWV3OiBmdW5jdGlvbiBoYW5kbGVQcmV2aWV3KGZpbGUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCEoIWZpbGUudXJsICYmICFmaWxlLnByZXZpZXcpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBnZXRCYXNlNjQoZmlsZS5vcmlnaW5GaWxlT2JqKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgZmlsZS5wcmV2aWV3ID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgX3RoaXMucHJldmlld0ltYWdlID0gZmlsZS51cmwgfHwgZmlsZS5wcmV2aWV3OwogICAgICAgICAgICAgICAgX3RoaXMucHJldmlld1Zpc2libGUgPSB0cnVlOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgaGFuZGxlQ2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVDaGFuZ2UoX3JlZikgewogICAgICB2YXIgZmlsZSA9IF9yZWYuZmlsZSwKICAgICAgICAgIGZpbGVMaXN0ID0gX3JlZi5maWxlTGlzdDsKICAgICAgdGhpcy5maWxlTGlzdCA9IGZpbGVMaXN0OwogICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCJjb3Vyc2VJZCIsIHRoaXMuY291cnNlSWQpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoInR5cGUiLCB0aGlzLnR5cGUpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoImN1ckltZ0lkIiwgLTEpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoImZpbGUiLCBmaWxlKTsgLy8gY29uc29sZS5sb2coZmlsZSk7CgogICAgICBheGlvcy5wb3N0KGh0dHBBcGkudXBsb2FkZmlsZVVybCwgZm9ybURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgIHZhciBkYXRhcyA9IHJlc3VsdC5kYXRhOwogICAgICAgIGZpbGVVaWRSZWFsSWRbZmlsZS51aWRdID0gZGF0YXMuaWQ7CiAgICAgIH0pOwogICAgfSwKICAgIHJlbW92ZUltZzogZnVuY3Rpb24gcmVtb3ZlSW1nKGZpbGUpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgY3VySW1nSWQsIGZvcm1EYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjdXJJbWdJZCA9IGZpbGVVaWRSZWFsSWRbZmlsZS51aWRdOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coY3VySW1nSWQgKyAiLS0tLeenu+mZpOWbvueJhy0tLSIpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZmlsZSk7CiAgICAgICAgICAgICAgICBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCJjb3Vyc2VJZCIsIF90aGlzMi5jb3Vyc2VJZCk7CiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoImN1ckltZ0lkIiwgY3VySW1nSWQpOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA4OwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoaHR0cEFwaS5yZW1vdmVGaWxlVXJsLCBmb3JtRGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIF90aGlzMi5maWxlTGlzdC5zcGxpY2UoJC5pbkFycmF5KGZpbGUsIF90aGlzMi5maWxlTGlzdCksIDEpOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBiZWZvcmVVcGxvYWQ6IGZ1bmN0aW9uIGJlZm9yZVVwbG9hZCgpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0KfTs="},{"version":3,"sources":["courseLoopImages.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"clearfix\">\r\n    <a-upload\r\n      list-type=\"picture-card\"\r\n      :file-list=\"fileList\"\r\n      @preview=\"handlePreview\"\r\n      :beforeUpload=\"beforeUpload\"\r\n      @change=\"handleChange\"\r\n      :remove=\"removeImg\"\r\n    >\r\n      <div v-if=\"fileList.length < 58\">\r\n        <a-icon type=\"plus\" />\r\n        <div class=\"ant-upload-text\">\r\n          Upload\r\n        </div>\r\n      </div>\r\n    </a-upload>\r\n    <a-modal :visible=\"previewVisible\" :footer=\"null\" @cancel=\"handleCancel\">\r\n      <img alt=\"example\" style=\"width: 100%\" :src=\"previewImage\" />\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n<script>\r\nimport $ from 'jquery';\r\nimport httpApi from '../../api/http';\r\nimport axios from 'axios';\r\n\r\nconst fileUidRealId={};\r\n\r\nfunction getBase64(img) {\r\n  \r\n    const reader = new FileReader();\r\n    // reader.addEventListener(\"load\", () => callback(reader.result));\r\n    reader.readAsDataURL(img);\r\n  return new Promise((resolve, reject) => {\r\n    reader.onload = () => resolve(reader.result);\r\n    reader.onerror = error => reject(error);\r\n  });\r\n}\r\nexport default {\r\n  props:['courseId','type'],\r\n  data() {\r\n    return {\r\n      previewVisible: false,\r\n      previewImage: '',\r\n      fileList: [],\r\n      fileUidRealId,\r\n    };\r\n  },\r\n  methods: {\r\n    handleCancel() {\r\n      this.previewVisible = false;\r\n    },\r\n    async handlePreview(file) {\r\n      if (!file.url && !file.preview) {\r\n        file.preview = await getBase64(file.originFileObj);\r\n      }\r\n      this.previewImage = file.url || file.preview;\r\n      this.previewVisible = true;\r\n    },\r\n    handleChange({file,fileList}) {\r\n      this.fileList = fileList;\r\n      let formData = new FormData();\r\n      formData.append(\"courseId\",this.courseId);\r\n      formData.append(\"type\",this.type);\r\n      formData.append(\"curImgId\",-1);\r\n      formData.append(\"file\",file);\r\n      // console.log(file);\r\n      \r\n      axios.post(httpApi.uploadfileUrl,formData).then((result) => {\r\n        let datas = result.data;\r\n        fileUidRealId[file.uid]= datas.id;\r\n      });\r\n\r\n    },\r\n    async removeImg(file){\r\n      let curImgId = fileUidRealId[file.uid];\r\n      console.log(curImgId+\"----移除图片---\");\r\n      console.log(file);\r\n      let formData = new FormData();\r\n      formData.append(\"courseId\",this.courseId);\r\n      formData.append(\"curImgId\",curImgId);\r\n      await axios.post(httpApi.removeFileUrl,formData);\r\n      this.fileList.splice($.inArray(file,this.fileList),1)\r\n      return false;\r\n    },\r\n   \r\n    beforeUpload() {\r\n      return false;\r\n    }\r\n  },\r\n  \r\n};\r\n</script>\r\n<style>\r\n/* you can make up upload button and sample style by using stylesheets */\r\n.ant-upload-select-picture-card i {\r\n  font-size: 32px;\r\n  color: #999;\r\n}\r\n\r\n.ant-upload-select-picture-card .ant-upload-text {\r\n  margin-top: 8px;\r\n  color: #666;\r\n}\r\n</style>"],"sourceRoot":"src/views/course"}]}