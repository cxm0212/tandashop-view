{"remainingRequest":"E:\\资料整理cxm\\sihuo项目\\weichat\\tandashop\\tdshop-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\资料整理cxm\\sihuo项目\\weichat\\tandashop\\tdshop-view\\src\\views\\course\\addcourse.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"E:\\资料整理cxm\\sihuo项目\\weichat\\tandashop\\tdshop-view\\src\\views\\course\\addcourse.vue","mtime":1590041461174},{"path":"E:\\资料整理cxm\\sihuo项目\\weichat\\tandashop\\tdshop-view\\node_modules\\css-loader\\dist\\cjs.js","mtime":1589772033266},{"path":"E:\\资料整理cxm\\sihuo项目\\weichat\\tandashop\\tdshop-view\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1589772043897},{"path":"E:\\资料整理cxm\\sihuo项目\\weichat\\tandashop\\tdshop-view\\node_modules\\postcss-loader\\src\\index.js","mtime":1589772038662},{"path":"E:\\资料整理cxm\\sihuo项目\\weichat\\tandashop\\tdshop-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1589772030553},{"path":"E:\\资料整理cxm\\sihuo项目\\weichat\\tandashop\\tdshop-view\\node_modules\\vue-loader\\lib\\index.js","mtime":1589772043896}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCiNmb3JtIC5kcm9wYm94IHsNCiAgaGVpZ2h0OiAxODBweDsNCiAgbGluZS1oZWlnaHQ6IDEuNTsNCn0NCi5hbnQtY29sIC5hbnQtY29sLTYgew0KICB3aWR0aDogYXV0bzsNCn0NCg=="},{"version":3,"sources":["addcourse.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyVA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addcourse.vue","sourceRoot":"src/views/course","sourcesContent":["<template>\r\n  <a-form-model id=\"form\" v-bind=\"formItemLayout\" :model=\"form\" :rules=\"rules\" ref=\"courseForm\">\r\n   <a-row :gutter=\"8\">\r\n  <a-col class=\"gutter-row\" :xs=\"12\" :sm=\"12\" :md=\"10\" :lg=\"6\" :xl=\"6\">\r\n        <div class=\"gutter-box\">\r\n          <a-form-model-item label=\"课程编号\" >\r\n            {{courseId}}\r\n          </a-form-model-item>\r\n        </div>\r\n      </a-col>\r\n   </a-row>\r\n    <a-row :gutter=\"8\">\r\n      <a-col class=\"gutter-row\" :xs=\"12\" :sm=\"12\" :md=\"10\" :lg=\"6\" :xl=\"6\">\r\n        <div class=\"gutter-box\">\r\n          <a-form-model-item label=\"课程类别\" has-feedback prop=\"categoryId\">\r\n            <a-select :options=\"categortoptions\" v-model=\"form.categoryId\" placeholder=\"选择课程分类！\" >\r\n              <!-- <a-select-option :value=\"1\">自然文学</a-select-option>\r\n              <a-select-option :value=\"2\">科技</a-select-option> -->\r\n            </a-select>\r\n          </a-form-model-item>\r\n        </div>\r\n      </a-col>\r\n      <a-col class=\"gutter-row\" :xs=\"12\" :sm=\"12\" :md=\"10\" :lg=\"6\" :xl=\"6\">\r\n        <div class=\"gutter-box\">\r\n          <a-form-model-item label=\"课程标题\" prop=\"title\">\r\n            <a-input v-model=\"form.title\" />\r\n          </a-form-model-item>\r\n        </div>\r\n      </a-col>\r\n      <a-col class=\"gutter-row\" :xs=\"12\" :sm=\"12\" :md=\"10\" :lg=\"6\" :xl=\"6\">\r\n        <div class=\"gutter-box\">\r\n          <a-form-model-item label=\"课程描述\" prop=\"desc\">\r\n            <a-textarea :auto-size=\"{ minRows: 1, maxRows: 5 }\" v-model=\"form.desc\" />\r\n          </a-form-model-item>\r\n        </div>\r\n      </a-col>\r\n      <a-col class=\"gutter-row\" :xs=\"12\" :sm=\"12\" :md=\"10\" :lg=\"6\" :xl=\"6\">\r\n        <div class=\"gutter-box\">\r\n          <a-form-model-item label=\"是否上架\">\r\n            <a-radio-group name=\"isline\" v-model=\"form.isline\">\r\n              <a-radio :value=\"1\">是</a-radio>\r\n              <a-radio :value=\"0\">否</a-radio>\r\n            </a-radio-group>\r\n          </a-form-model-item>\r\n        </div>\r\n      </a-col>\r\n    </a-row>\r\n    <a-row :gutter=\"8\">\r\n      <a-col class=\"gutter-row\" :xs=\"12\" :sm=\"12\" :md=\"10\" :lg=\"8\" :xl=\"6\">\r\n        <div class=\"gutter-box\">\r\n          <a-form-model-item label=\"原价\" prop=\"price\">\r\n            <a-input-number\r\n              :min=\"0.01\"\r\n              :formatter=\"value => `$ ${value}`.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\"\r\n              v-model=\"form.price\"\r\n            />\r\n          </a-form-model-item>\r\n        </div>\r\n      </a-col>\r\n      <a-col class=\"gutter-row\" :xs=\"12\" :sm=\"12\" :md=\"10\" :lg=\"8\" :xl=\"6\">\r\n        <div class=\"gutter-box\">\r\n          <a-form-model-item label=\"是否上推荐\">\r\n            <a-radio-group name=\"ishot\" v-model=\"form.ishot\">\r\n              <a-radio :value=\"1\">是</a-radio>\r\n              <a-radio :value=\"0\">否</a-radio>\r\n            </a-radio-group>\r\n          </a-form-model-item>\r\n        </div>\r\n      </a-col>\r\n      <a-col class=\"gutter-row\" :xs=\"12\" :sm=\"12\" :md=\"10\" :lg=\"8\" :xl=\"6\">\r\n        <div class=\"gutter-box\">\r\n          <a-form-model-item label=\"适用最小年龄\">\r\n            <a-input-number :min=\"0\" v-model=\"form.minAge\" />\r\n          </a-form-model-item>\r\n        </div>\r\n      </a-col>\r\n      <a-col class=\"gutter-row\" :xs=\"12\" :sm=\"12\" :md=\"10\" :lg=\"8\" :xl=\"6\">\r\n        <div class=\"gutter-box\">\r\n          <a-form-model-item label=\"适用最大年龄\">\r\n            <a-input-number :min=\"1\" v-model=\"form.maxAge\" />\r\n          </a-form-model-item>\r\n        </div>\r\n      </a-col>\r\n    </a-row>\r\n    <a-row :gutter=\"8\">\r\n      <a-col class=\"gutter-row\" :xs=\"12\" :sm=\"12\" :md=\"10\" :lg=\"6\" :xl=\"6\">\r\n        <div class=\"gutter-box\">\r\n          <a-form-model-item label=\"是否拼团\">\r\n            <a-radio-group name=\"isgroup\" v-model=\"form.isgroup\">\r\n              <a-radio :value=\"1\">是</a-radio>\r\n              <a-radio :value=\"0\">否</a-radio>\r\n            </a-radio-group>\r\n          </a-form-model-item>\r\n        </div>\r\n      </a-col>\r\n\r\n      <a-col class=\"gutter-row\" :xs=\"12\" :sm=\"12\" :md=\"10\" :lg=\"6\" :xl=\"6\" v-if=\"form.isgroup===1\">\r\n        <div class=\"gutter-box\">\r\n          <a-form-model-item label=\"拼团价格\">\r\n            <a-input-number :min=\"0.01\" v-model=\"form.groupPrice\" />\r\n          </a-form-model-item>\r\n        </div>\r\n      </a-col>\r\n      <a-col class=\"gutter-row\" :xs=\"12\" :sm=\"12\" :md=\"10\" :lg=\"6\" :xl=\"6\" v-if=\"form.isgroup===1\">\r\n        <div class=\"gutter-box\">\r\n          <a-form-model-item label=\"拼团人数\">\r\n            <a-input-number :min=\"2\" v-model=\"form.groupNum\" />\r\n          </a-form-model-item>\r\n        </div>\r\n      </a-col>\r\n    </a-row>\r\n    <a-row :gutter=\"8\">\r\n      <a-col class=\"gutter-row\" :span=\"24\" style=\"text-align:center\">\r\n        <div class=\"gutter-box\">\r\n          <a-form-model-item>\r\n            <a-button type=\"primary\" @click=\"submitForm\">保存</a-button>\r\n          </a-form-model-item>\r\n        </div>\r\n      </a-col>\r\n    </a-row>\r\n     <a-divider />\r\n    <a-row v-if=\"courseId>0\">\r\n    <a-row :gutter=\"8\">\r\n      <a-col class=\"gutter-row\" :span=\"20\">\r\n        <div class=\"gutter-box\">\r\n          <a-form-model-item label=\"课程缩略图\">\r\n            <UploadImageOne ref=\"img0\" :courseId=\"courseId\" type=\"img_0\"/>\r\n          </a-form-model-item>\r\n        </div>\r\n      </a-col>\r\n    </a-row>\r\n    <a-row :gutter=\"8\">\r\n      <a-col class=\"gutter-row\" :span=\"24\">\r\n        <div class=\"gutter-box\">\r\n          <a-form-model-item label=\"课程轮播图\">\r\n            <LoopImages ref=\"img1\" :courseId=\"courseId\" type=\"img_1\"/>\r\n          </a-form-model-item>\r\n        </div>\r\n      </a-col>\r\n    </a-row>\r\n    <a-row :gutter=\"8\">\r\n      <a-col class=\"gutter-row\" :span=\"8\">\r\n        <div class=\"gutter-box\">\r\n          <a-form-model-item label=\"课程详情图\">\r\n            <UploadImageOne ref=\"img2\" :courseId=\"courseId\" type=\"img_2\"/>\r\n          </a-form-model-item>\r\n        </div>\r\n      </a-col>\r\n\r\n      <a-col class=\"gutter-row\" :span=\"8\">\r\n        <div class=\"gutter-box\">\r\n          <a-form-model-item label=\"课程大纲图\">\r\n            <UploadImageOne ref=\"img3\" :courseId=\"courseId\" type=\"img_3\"/>\r\n          </a-form-model-item>\r\n        </div>\r\n      </a-col>\r\n\r\n      <a-col class=\"gutter-row\" :span=\"8\">\r\n        <div class=\"gutter-box\">\r\n          <a-form-model-item label=\"课程须知图\">\r\n            <UploadImageOne ref=\"img4\" :courseId=\"courseId\" type=\"img_4\"/>\r\n          </a-form-model-item>\r\n        </div>\r\n      </a-col>\r\n    </a-row>\r\n    <a-row :gutter=\"8\">\r\n      <a-col class=\"gutter-row\" :span=\"8\">\r\n        <div class=\"gutter-box\">\r\n          <a-form-model-item label=\"课程试看视频\">\r\n            <UploadVideo ref=\"img5\" :courseId=\"courseId\" type=\"img_5\"/>\r\n          </a-form-model-item>\r\n        </div>\r\n      </a-col>\r\n\r\n      <a-col class=\"gutter-row\" :span=\"8\">\r\n        <div class=\"gutter-box\">\r\n          <a-form-model-item label=\"课程完整视频\">\r\n            <UploadVideo ref=\"img6\" :courseId=\"courseId\" type=\"img_6\"/>\r\n          </a-form-model-item>\r\n        </div>\r\n      </a-col>\r\n    </a-row>\r\n    </a-row>\r\n  </a-form-model>\r\n</template>\r\n\r\n<script>\r\nimport UploadImageOne from \"./uploadImageOne\";\r\nimport UploadVideo from \"./uploadVideo\";\r\nimport LoopImages from \"./courseLoopImages\";\r\nimport axios from \"axios\";\r\nimport httpApi from \"../../api/http\";\r\n\r\nexport default {\r\n  name: \"addCourse\",\r\n  components: {\r\n    LoopImages,\r\n    UploadImageOne,\r\n    UploadVideo\r\n  },\r\n  props:['courseId'],\r\n  data() {\r\n    return {\r\n      formItemLayout: {\r\n        labelCol: { span: 6 },\r\n        wrapperCol: { span: 14 }\r\n      },\r\n      form: {\r\n        categoryId: \"\",\r\n        title: \"\",\r\n        desc: \"\",\r\n        isline: \"1\",\r\n        price: \"\",\r\n        ishot: \"1\",\r\n        minAge: \"\",\r\n        maxAge: \"\",\r\n        isgroup: \"0\",\r\n        groupPrice: \"0.1\",\r\n        groupNum: \"2\"\r\n      },\r\n      rules: {\r\n        categoryId: [{ required: true, message: \"课程分类不能为空!\" }],\r\n        title: [{ required: true, message: \"课程标题为空！\" }],\r\n        desc: [{ required: true, message: \"课程描述为空！\" }],\r\n        price: [{ required: true, message: \"价格为空！\" }]\r\n      },\r\n      categortoptions:[],\r\n    };\r\n  },\r\n  methods: {  \r\n    submitForm() {\r\n      this.$refs.courseForm.validate(validate => {\r\n        if (!validate) {\r\n          return;\r\n        }\r\n        let params = this.form;\r\n        params[\"id\"] = this.courseId;\r\n        axios\r\n          .post(httpApi.addCourseUrl, params)\r\n          .then(result => {\r\n            // console.log(result.data);\r\n            let datas = result.data;\r\n            this.$message.success(datas.message);\r\n            if (datas.code == 2001) {\r\n              this.courseId = datas.data.id;\r\n            }\r\n          })\r\n          .catch(err => {\r\n            console.log(err);\r\n          });\r\n        return;\r\n      });\r\n    },\r\n    async getFileList(){\r\n      // console.log(this.courseId)\r\n      if(this.courseId<=0 || this.courseId==\"\" || this.courseId==null){\r\n        return\r\n      }\r\n      await axios.post(httpApi.getFileListUrl,{'courseId':this.courseId}).then((result) => {\r\n        let datas = result.data;\r\n        // console.log(datas)\r\n        if(datas[0]!=null){\r\n          this.$refs.img0.imageUrl = datas[0].url;\r\n          this.$refs.img0.curImgId = datas[0].id;\r\n        }\r\n        datas[1].forEach(item => {\r\n          this.$refs.img1.fileUidRealId[item.uid]=item.id;\r\n        });\r\n        this.$refs.img1.fileList = datas[1];\r\n        if(datas[2]!=null){\r\n          this.$refs.img2.imageUrl = datas[2].url;\r\n          this.$refs.img2.curImgId = datas[2].id;\r\n        }\r\n        if(datas[3]!=null){\r\n          this.$refs.img3.imageUrl = datas[3].url;\r\n          this.$refs.img3.curImgId = datas[3].id;\r\n        }\r\n        if(datas[4]!=null){\r\n          this.$refs.img4.imageUrl = datas[4].url;\r\n          this.$refs.img4.curImgId = datas[4].id;\r\n        }\r\n        if(datas[5]!=null){\r\n          this.$refs.img5.imageUrl = datas[5].url;\r\n          this.$refs.img5.curImgId = datas[5].id;\r\n        }\r\n        if(datas[6]!=null){\r\n          this.$refs.img6.imageUrl = datas[6].url;\r\n          this.$refs.img6.curImgId = datas[6].id;\r\n        }\r\n      });\r\n    },\r\n    getCourseByid(){\r\n      if(this.courseId<=0 || this.courseId==\"\" || this.courseId==null){\r\n        return\r\n      }\r\n       axios.post(httpApi.getCourseListUrl,{'courseId':this.courseId,type:'update'}).then((result) => {\r\n        let datas = result.data;\r\n        this.form = datas.data[0];\r\n        this.form.ishot = Number(this.form.ishot);\r\n        this.form.isline = Number(this.form.isline);\r\n        this.form.isgroup = Number(this.form.isgroup);\r\n      });\r\n    },\r\n    getCategorys(){\r\n        axios.post(httpApi.getCategoryListUrl,{}).then((result) => {\r\n            // console.log(result.data);\r\n            \r\n            let arr = result.data.data;\r\n            arr.forEach((item) => {\r\n              let option={};\r\n              option['value'] = item.id;\r\n              option['title'] = item.categoryName;\r\n              this.categortoptions[this.categortoptions .length] = option\r\n            })\r\n          // console.log(this.categortoptions)\r\n        }).catch((err) => {\r\n            console.log(err)\r\n        });\r\n    }\r\n  },\r\n  mounted() {\r\n    // 等待整个视图都渲染完毕再加载\r\n    this.$nextTick(function () {\r\n      this.getFileList();\r\n      this.getCategorys();\r\n      this.getCourseByid();\r\n    })\r\n},\r\n \r\n  // computed:{\r\n  //   courseId:function(){\r\n        // this.$refs.img1.courseId = this.courseId;\r\n        // this.$refs.imgList.courseId = this.courseId;\r\n        // this.$refs.img2.courseId = this.courseId;\r\n        // this.$refs.img3.courseId = this.courseId;\r\n        // this.$refs.img4.courseId = this.courseId;\r\n        // this.$refs.video1.courseId = this.courseId;\r\n        // this.$refs.video2.courseId = this.courseId;\r\n  //   }\r\n\r\n  // }\r\n};\r\n</script>\r\n\r\n<style>\r\n#form .dropbox {\r\n  height: 180px;\r\n  line-height: 1.5;\r\n}\r\n.ant-col .ant-col-6 {\r\n  width: auto;\r\n}\r\n</style>"]}]}