{"remainingRequest":"E:\\资料整理cxm\\sihuo项目\\weichat\\tandashop\\tdshop-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\资料整理cxm\\sihuo项目\\weichat\\tandashop\\tdshop-view\\src\\views\\login\\login.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\资料整理cxm\\sihuo项目\\weichat\\tandashop\\tdshop-view\\src\\views\\login\\login.vue","mtime":1589442896040},{"path":"E:\\资料整理cxm\\sihuo项目\\weichat\\tandashop\\tdshop-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\资料整理cxm\\sihuo项目\\weichat\\tandashop\\tdshop-view\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\资料整理cxm\\sihuo项目\\weichat\\tandashop\\tdshop-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\资料整理cxm\\sihuo项目\\weichat\\tandashop\\tdshop-view\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOw0KaW1wb3J0IGh0dHBBcGkgZnJvbSAnLi4vLi4vYXBpL2h0dHAuanMnOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiTG9naW4iLA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICAgIGNvZGVVcmw6Jy4uLy4uL2Fzc2V0cy9sb2dvLnBuZycsDQogICAgICAgIGNvZGVUZXh0OicnLA0KICAgICAgICANCiAgICB9Ow0KICB9LA0KICBiZWZvcmVDcmVhdGUoKSB7DQogICAgdGhpcy5mb3JtID0gdGhpcy4kZm9ybS5jcmVhdGVGb3JtKHRoaXMsIHsgbmFtZTogJ25vcm1hbF9sb2dpbicgfSk7DQogICAgDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBoYW5kbGVTdWJtaXQoZSkgew0KICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgdGhpcy5mb3JtLnZhbGlkYXRlRmllbGRzKChlcnIsIHZhbHVlcykgPT4gew0KICAgICAgICBpZiAoIWVycikgew0KICAgICAgICAgICAgaWYodGhpcy5jb2RlVGV4dC50b0xvd2VyQ2FzZSgpIT09dmFsdWVzLmNvZGVJbnB1dFZhbHVlLnRvTG93ZXJDYXNlKCkpew0KICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+mqjOivgeeggemUmeivryEnKTsNCiAgICAgICAgICAgICAgICB0aGlzLmdldGNvZGUoKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YWx1ZXMuY29kZVRleHQgPSB0aGlzLmNvZGVUZXh0Ow0KICAgICAgICAgICAgY29uc29sZS5sb2coJ1JlY2VpdmVkIHZhbHVlcyBvZiBmb3JtOiAnLCB2YWx1ZXMpOw0KICAgICAgICAgICAgYXhpb3MucG9zdChodHRwQXBpLmxvZ2luVXJsLHZhbHVlcykudGhlbigocmVzdWx0KSA9PiB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KQ0KICAgICAgICAgICAgICAgIGxldCBkYXRhcyA9IHJlc3VsdC5kYXRhOw0KICAgICAgICAgICAgICAgIGlmKGRhdGFzLnN0YXR1cz09PTEwMDApew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGRhdGFzLm1zZyk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0Y29kZSgpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOidob21lJ30pDQogICAgICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIueZu+mZhuW8guW4uCA6ICIrZXJyKQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgZ2V0Y29kZSgpew0KICAgICAgICBheGlvcy5nZXQoaHR0cEFwaS5nZXRDb2RlVXJsKS50aGVuKChyZXN1bHQpID0+IHsNCiAgICAgICAgICAgIHRoaXMuY29kZVVybCA9IHJlc3VsdC5kYXRhLmNvZGU7DQogICAgICAgICAgICB0aGlzLmNvZGVUZXh0ID0gcmVzdWx0LmRhdGEuY29kZVRleHQ7DQogICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycikNCiAgICAgICAgfSk7DQogICAgfQ0KICB9LA0KICBtb3VudGVkKCl7DQogICAgICB0aGlzLmdldGNvZGUoKTsNCiAgICAgIHRoaXMuZm9ybS5zZXRGaWVsZHNWYWx1ZSh7bG9naW5OYW1lOiJhZG1pbiIsbG9naW5QYXNzd29yZDoiYWRtaW4ifSkNCiAgfSwNCn0NCg=="},{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src/views/login","sourcesContent":["<template>\r\n  <a-layout class>\r\n    <a-layout-content>\r\n      <div class=\"form-header\">\r\n        <img src=\"../../assets/logo.png\" />\r\n        <label>后台管理</label>\r\n      </div>\r\n      <a-form  :form=\"form\"  id=\"form-login\" class=\"login-form center\" @submit=\"handleSubmit\"> \r\n        <a-form-item>\r\n          <a-input \r\n            placeholder=\"登录名\" \r\n            v-decorator=\"[\r\n            'loginName',\r\n            { rules: [{ required: true, message: 'Please input your username!' }] },\r\n            ]\"\r\n          >\r\n            <a-icon slot=\"prefix\" type=\"user\" style=\"color: rgba(0,0,0,.25)\" />\r\n          </a-input>\r\n        </a-form-item>\r\n        <a-form-item>\r\n          <a-input type=\"password\"  placeholder=\"密码\" name=\"loginPassword\" v-decorator=\"[\r\n          'loginPassword',\r\n          { rules: [{ required: true, message: 'Please input your Password!' }] },\r\n        ]\">\r\n            <a-icon slot=\"prefix\" type=\"lock\" style=\"color: rgba(0,0,0,.25)\" />\r\n          </a-input>\r\n        </a-form-item>\r\n        <a-form-item>\r\n            <a-input class=\"codeinput\" placeholder=\"请输入验证码\" name=\"codeInputValue\" v-decorator=\"[\r\n          'codeInputValue',\r\n          { rules: [{ required: true, message: '验证码不能为空!'}] },\r\n        ]\">\r\n            </a-input>\r\n            <img :src=\"codeUrl\" class=\"code\">\r\n        </a-form-item>\r\n        <a-form-item>\r\n          <a class=\"login-form-forgot\" href>Forgot password</a>\r\n          <a-button type=\"primary\" html-type=\"submit\" class=\"login-form-button\">登陆</a-button>\r\n        </a-form-item>\r\n      </a-form>\r\n    </a-layout-content>\r\n    <a-layout-footer>公众号课程管理</a-layout-footer>\r\n  </a-layout>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport httpApi from '../../api/http.js';\r\nexport default {\r\n  name: \"Login\",\r\n  data() {\r\n    return {\r\n        codeUrl:'../../assets/logo.png',\r\n        codeText:'',\r\n        \r\n    };\r\n  },\r\n  beforeCreate() {\r\n    this.form = this.$form.createForm(this, { name: 'normal_login' });\r\n    \r\n  },\r\n  methods: {\r\n    handleSubmit(e) {\r\n      e.preventDefault();\r\n      this.form.validateFields((err, values) => {\r\n        if (!err) {\r\n            if(this.codeText.toLowerCase()!==values.codeInputValue.toLowerCase()){\r\n                this.$message.error('验证码错误!');\r\n                this.getcode();\r\n                return;\r\n            }\r\n            values.codeText = this.codeText;\r\n            console.log('Received values of form: ', values);\r\n            axios.post(httpApi.loginUrl,values).then((result) => {\r\n                console.log(result)\r\n                let datas = result.data;\r\n                if(datas.status===1000){\r\n                    this.$message.error(datas.msg);\r\n                    this.getcode();\r\n                    return;\r\n                }\r\n                this.$router.push({name:'home'})\r\n            }).catch((err) => {\r\n                console.log(\"登陆异常 : \"+err)\r\n            });\r\n        }\r\n      });\r\n    },\r\n    getcode(){\r\n        axios.get(httpApi.getCodeUrl).then((result) => {\r\n            this.codeUrl = result.data.code;\r\n            this.codeText = result.data.codeText;\r\n        }).catch((err) => {\r\n            console.log(err)\r\n        });\r\n    }\r\n  },\r\n  mounted(){\r\n      this.getcode();\r\n      this.form.setFieldsValue({loginName:\"admin\",loginPassword:\"admin\"})\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.center {\r\n  text-align: center;\r\n}\r\n.ant-layout {\r\n  font-family: Arial, \"PingFang SC\", \"Microsoft YaHei\";\r\n}\r\n.ant-layout-content {\r\n  width: 100%;\r\n  height: 100%;\r\n  background: url(\"../../assets/images/login-bg.jpg\") no-repeat fixed;\r\n  background-size: cover;\r\n  padding: 13% 34% 12% 34%;\r\n}\r\n.form-header label {\r\n  font-size: 20px;\r\n  font-weight: 600;\r\n}\r\n.form-header img {\r\n  width: 30px;\r\n  height: 30px;\r\n}\r\n.login-form {\r\n  max-width: 400px;\r\n  width: 400px;\r\n  background: #ffffff;\r\n  border: #e8e8ee solid 1px;\r\n  border-radius: 4px;\r\n  padding: 30px;\r\n}\r\n.login-form-forgot {\r\n  float: right;\r\n}\r\n.login-form-button {\r\n  width: 100%;\r\n}\r\n.login-form .codeinput{\r\n    width:150px;\r\n    float: left;\r\n}\r\n.login-form .code{\r\n    width: 150px;\r\n    height: 50px;\r\n}\r\n</style>"]}]}